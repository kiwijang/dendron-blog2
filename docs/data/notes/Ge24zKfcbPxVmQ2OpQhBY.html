<h1 id="0208-live-server-é–‹å•Ÿ-build-æª”æ¡ˆ"><a aria-hidden="true" class="anchor-heading" href="#0208-live-server-é–‹å•Ÿ-build-æª”æ¡ˆ"><svg aria-hidden="true" viewBox="0 0 16 16"><use xlink:href="#svg-link"></use></svg></a>0208 Live Server é–‹å•Ÿ build æª”æ¡ˆ</h1>
<h2 id="1-ç›´æ¥è³‡æ–™å¤¾é–‹å•Ÿ-indexhtmlæœƒé‡åˆ°ä¸€äº›å•é¡Œ"><a aria-hidden="true" class="anchor-heading" href="#1-ç›´æ¥è³‡æ–™å¤¾é–‹å•Ÿ-indexhtmlæœƒé‡åˆ°ä¸€äº›å•é¡Œ"><svg aria-hidden="true" viewBox="0 0 16 16"><use xlink:href="#svg-link"></use></svg></a>1. ç›´æ¥è³‡æ–™å¤¾é–‹å•Ÿ index.htmlï¼Œæœƒé‡åˆ°ä¸€äº›å•é¡Œ:</h2>
<p>åœ¨ angular çš„ index.html é è¨­æ˜¯ <code>&#x3C;base href="/"></code></p>
<p>æ‰€ä»¥æœƒä»¥æª”æ¡ˆè³‡æ–™å¤¾ç›®éŒ„çš„ä½ç½®æ‰“é–‹(ç¶²å€åˆ—æœƒé•·é€™æ¨£: <code>file:///C:/Users/xxx.../dist/apps/client/index.html</code>)</p>
<p>å¦‚æœæƒ³ç”¨ <code>&#x3C;base href="./"></code> è§£æ±ºå•é¡Œï¼Œè‹¥æœ‰è¨­å®šè·¯ç”±æœƒç™¼ç¾ç¶²å€é™¤äº† server æ ¹ç¶²å€ä»¥å¤–é‚„å¤šäº†è·¯ç”±ï¼Œç„¶å¾Œç™¼ç”Ÿ 404 éŒ¯èª¤...</p>
<p><img src="/assets/images/2022-02-08-17-00-24.png"></p>
<p>å¦å¤–ï¼Œåœ¨ç€è¦½å™¨ä¸Š es6 module ä¸€å®šæœƒéµå¾ª CORS (åƒè€ƒæ–‡ç« :<a href="https://www.ithome.com.tw/voice/132470">ES6 æ¨¡çµ„åŒ¯å…¥-æ—ä¿¡è‰¯</a>)ï¼Œæ‰€ä»¥å¦‚æœç›´æ¥ç”¨ <code>file:///C:/Users/xxx.../dist/apps/client/index.html</code> é–‹å•Ÿæœƒå‡ºç¾é€™æ¨£çš„éŒ¯èª¤:</p>
<p><img src="/assets/images/2022-02-08-17-18-04.png"></p>
<p><img src="/assets/images/2022-02-08-17-55-33.png"></p>
<blockquote>
<p>Origin: null æ˜¯ null çš„ã€‚ğŸ˜­</p>
</blockquote>
<h2 id="2-ä¸‹è¼‰-live-server"><a aria-hidden="true" class="anchor-heading" href="#2-ä¸‹è¼‰-live-server"><svg aria-hidden="true" viewBox="0 0 16 16"><use xlink:href="#svg-link"></use></svg></a>2. ä¸‹è¼‰ Live Server</h2>
<p><img src="/assets/images/2022-02-08-13-49-40.png"></p>
<p>æ‰€ä»¥é€™æ™‚å°±å¯ä»¥ç”¨ vscode çš„ <a href="https://marketplace.visualstudio.com/items?itemName=ritwickdey.LiveServer">Live Server æ“´å……å¥—ä»¶</a> ä¾†è§£æ±º Origin çš„å•é¡Œã€‚</p>
<p>æ¥è‘—ç™¼ç¾å¯ä»¥æˆåŠŸè¼‰å…¥é¦–é ï¼Œä½†æ˜¯å…¶ä»–è·¯ç”±æœƒ 404...</p>
<h2 id="3-ä½¿ç”¨-live-server-ä½†è·¯ç”±å‡ºå•é¡Œ"><a aria-hidden="true" class="anchor-heading" href="#3-ä½¿ç”¨-live-server-ä½†è·¯ç”±å‡ºå•é¡Œ"><svg aria-hidden="true" viewBox="0 0 16 16"><use xlink:href="#svg-link"></use></svg></a>3. ä½¿ç”¨ Live Server ä½†è·¯ç”±å‡ºå•é¡Œ:</h2>
<p>åŸå› æ˜¯ç€è¦½å™¨æŠŠè·¯ç”±ç•¶æˆ http request äº†ã€‚ğŸ˜­</p>
<p><img src="/assets/images/2022-02-08-18-04-09.png"></p>
<p>æ–¼æ˜¯ç‚ºäº†è§£æ±ºé€™å€‹å•é¡Œï¼Œå¯ä»¥è¨­å®š HashLocationStrategyã€‚</p>
<pre class="language-typescript"><code class="language-typescript">providers<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token punctuation">{</span>provide<span class="token operator">:</span> <span class="token maybe-class-name">LocationStrategy</span><span class="token punctuation">,</span> useClass<span class="token operator">:</span> <span class="token maybe-class-name">HashLocationStrategy</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
</code></pre>
<h2 id="4-é—œæ–¼-angular-hashlocationstrategy"><a aria-hidden="true" class="anchor-heading" href="#4-é—œæ–¼-angular-hashlocationstrategy"><svg aria-hidden="true" viewBox="0 0 16 16"><use xlink:href="#svg-link"></use></svg></a>4. é—œæ–¼ Angular HashLocationStrategy</h2>
<ul>
<li>Angular å®˜ç¶²
<a href="https://angular.tw/api/common/HashLocationStrategy">HashLocationStrategy</a></li>
</ul>
<blockquote>
<p>A LocationStrategy used to configure the Location service to represent its state in the <a href="https://en.wikipedia.org/wiki/URL#Syntax">hash fragment</a> of the browser's URL.
æ­¤ LocationStrategy ç”¨ä¾†é…ç½® Location æœå‹™ï¼Œä»¥ä¾¿åœ¨ç€è¦½å™¨ URL çš„ <a href="https://en.wikipedia.org/wiki/URL#Syntax">hash ç‰‡æ®µ</a>ä¸­è¡¨ç¤ºå…¶ç‹€æ…‹ã€‚</p>
</blockquote>
<ul>
<li>URI fragment wiki èªªæ˜
<a href="https://en.wikipedia.org/wiki/URI_fragment">URI fragment</a></li>
</ul>
<blockquote>
<p>Fragments depend on the document MIME type and are evaluated by the client (web browser). Clients are not supposed to send URI fragments to servers when they retrieve a document, and without help from a local application (see below) fragments do not participate in HTTP redirections.</p>
</blockquote>
<p>æ‰€ä»¥çœ‹èµ·ä¾† fragments å¯ä»¥è§£æ±ºç¶²å€è¢«é€åˆ° server çš„å•é¡Œï¼ğŸ‰</p>
<p>æ„Ÿè¦ºè¨­å®šæˆ HashLocationStrategy åªæœ‰å¥½è™•æ²’æœ‰å£è™•çš„æ„Ÿè¦º(é™¤äº†ä¸å¸¸çœ‹åˆ°æœ‰ç¶²å€æœƒé•·é€™æ¨£ä»¥å¤–)ã€‚</p>
<h2 id="5-å°çµè¨­å®š-hashlocationstrategy--live-server"><a aria-hidden="true" class="anchor-heading" href="#5-å°çµè¨­å®š-hashlocationstrategy--live-server"><svg aria-hidden="true" viewBox="0 0 16 16"><use xlink:href="#svg-link"></use></svg></a>5. å°çµ:è¨­å®š HashLocationStrategy + live server</h2>
<p>ä»¥å¾Œè¦é–‹å•Ÿ build å¾Œçš„æª”æ¡ˆï¼Œå¯ä»¥è¨­å®š HashLocationStrategy ç„¶å¾Œå†ç”¨ live server é–‹å•Ÿå°± Ok äº†ã€‚ğŸ‰</p>
<hr>
<h2 id="tags"><a aria-hidden="true" class="anchor-heading" href="#tags"><svg aria-hidden="true" viewBox="0 0 16 16"><use xlink:href="#svg-link"></use></svg></a>Tags</h2>
<ol>
<li><a class="color-tag" style="--tag-color: #017371;" href="/notes/zavPiB0ApTq1sGZOGq9xJ">PROG.Angular</a></li>
<li><a class="color-tag" style="--tag-color: #030764;" href="/notes/yvz3NEjMcVQ7sYJm3trFQ">PROG.Server</a></li>
</ol>