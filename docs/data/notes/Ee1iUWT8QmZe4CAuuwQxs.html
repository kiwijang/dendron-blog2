<h1 id="2021-1227-å¾-nx-å…¥é–€-monorepo"><a aria-hidden="true" class="anchor-heading" href="#2021-1227-å¾-nx-å…¥é–€-monorepo"><svg aria-hidden="true" viewBox="0 0 16 16"><use xlink:href="#svg-link"></use></svg></a>2021-1227-å¾ Nx å…¥é–€ monorepo</h1>
<h2 id="å‰è¨€"><a aria-hidden="true" class="anchor-heading" href="#å‰è¨€"><svg aria-hidden="true" viewBox="0 0 16 16"><use xlink:href="#svg-link"></use></svg></a>å‰è¨€</h2>
<blockquote>
<p>æ·±å…¥æ·ºå‡º Monorepo æ¶æ§‹ â€” ä½¿ç”¨ Nx Console å¯¦ç¾ä¸€å€‹ Monorepo æ¶æ§‹çš„å°ˆæ¡ˆ</p>
</blockquote>
<p>å°è®€å½±ç‰‡: <a href="https://www.youtube.com/watch?v=9iU_IE6vnJ8">Monorepos - How the Pros Scale Huge Software Projects // Turborepo vs Nx</a></p>
<h2 id="ç°¡ä»‹-monorepo-æ¶æ§‹"><a aria-hidden="true" class="anchor-heading" href="#ç°¡ä»‹-monorepo-æ¶æ§‹"><svg aria-hidden="true" viewBox="0 0 16 16"><use xlink:href="#svg-link"></use></svg></a>ç°¡ä»‹ Monorepo æ¶æ§‹</h2>
<p>Monorepo (å…¨å Monolithic Repository)ï¼Œç¬¦åˆä»¥ä¸‹ä¸‰å€‹æ¢ä»¶:</p>
<ol>
<li>One Repository</li>
<li>Multiple projects</li>
<li>Shared Libraries</li>
</ol>
<p>å¦‚ä¸‹åœ–ï¼Œå¯ä»¥çœ‹åˆ°:</p>
<ol>
<li><strong>ä¸€å€‹ repo</strong></li>
<li><strong>å¤šå€‹ projects</strong> (ä¸‰å€‹ app åŠ ä¸Šå…©å€‹ libs)</li>
<li><strong>å…±ç”¨ libs</strong>ã€‚</li>
</ol>
<p><img src="/dendron-blog/assets/images/2021-12-27-22-50-05.png" alt="MonoRepo"></p>
<p>Monorepo æ¶æ§‹çš„ä¸»è¦ç›®çš„æ˜¯å¸Œæœ›é›†ä¸­ç®¡ç†å¥—ä»¶ç‰ˆæœ¬ã€‚</p>
<p>é€éåªç®¡ç†ä¸€å€‹ <code>package.json</code>ï¼Œå¯ä»¥ç™¼ç¾å¥½è™•æ˜¯å¥—ä»¶ç‰ˆæœ¬ç®¡ç†æ–¹ä¾¿ã€è€Œå£è™•æ˜¯ä¸€å€‹ repo æœ‰å¤šå€‹ projectsï¼Œæª”æ¡ˆå®¹æ˜“è®Šéå¸¸å¤§ï¼Œè®“ git ç‰ˆæ§è»Ÿé«”è·‘èµ·ä¾†è¼ƒåƒåŠ›ã€‚</p>
<p>å¦å¤– Monorepo è®“ apps ä¹‹é–“å…±ç”¨ libs è®Šå¾—æ–¹ä¾¿ç°¡å–®ï¼Œæ‰€ä»¥å¯ä»¥é™ä½é‡è¤‡ç¨‹å¼ç¢¼çš„æ©Ÿç‡ã€‚
ä¹Ÿå¯ä»¥è®“ Lernaã€yarn ç­‰å¥—ä»¶ç®¡ç†å·¥å…·æ›´æ–¹ä¾¿çš„æ¸›å°‘é‡è¤‡çš„å¥—ä»¶å®‰è£ã€‚</p>
<p>è€Œä»¥ Nx ä¾†èªªï¼Œæ›´é…·çš„ç‰¹è‰²æ˜¯å¯ä»¥åœ¨åŒä¸€å€‹ repo è£¡åŒæ™‚ä½¿ç”¨ react å’Œ angular å…±åŒé–‹ç™¼ä¸€å€‹ appã€‚</p>
<p>é›–ç„¶ä¹Ÿå¯ä»¥ä½¿ç”¨ rollupjs ä¾†é”åˆ°ä¸åŒå‰ç«¯æ¡†æ¶å…±åŒé–‹ç™¼ä¸€å€‹ app çš„æ•ˆæœã€‚</p>
<p>ä½† Nx å°±åƒ monorepo å…¨å®¶æ¡¶: æä¾›ä¸€å€‹ Nx workspace è®“ä½ çš„ monorepo é–‹ç™¼æ›´å®¹æ˜“ã€‚</p>
<p>æ¥ä¸‹ä¾†ï¼Œåœ¨çœ‹çœ‹ Nx ä¹‹å‰ï¼Œå…ˆä¾†ä¸€äº›å…ˆå‚™çŸ¥è­˜ ğŸ˜†</p>
<h2 id="ç°¡ä»‹-nx-å·¥å…·èˆ‡å°ˆæœ‰åè©è§£é‡‹"><a aria-hidden="true" class="anchor-heading" href="#ç°¡ä»‹-nx-å·¥å…·èˆ‡å°ˆæœ‰åè©è§£é‡‹"><svg aria-hidden="true" viewBox="0 0 16 16"><use xlink:href="#svg-link"></use></svg></a>ç°¡ä»‹ Nx å·¥å…·èˆ‡å°ˆæœ‰åè©è§£é‡‹</h2>
<h3 id="ä»€éº¼æ˜¯-nx-"><a aria-hidden="true" class="anchor-heading" href="#ä»€éº¼æ˜¯-nx-"><svg aria-hidden="true" viewBox="0 0 16 16"><use xlink:href="#svg-link"></use></svg></a>ä»€éº¼æ˜¯ Nx ?</h3>
<p>å®˜ç¶²: <a href="https://nx.dev/">https://nx.dev/</a></p>
<p><img src="/dendron-blog/assets/images/2021-12-27-23-55-50.png"></p>
<blockquote>
<p>Smart, Extensible Build Framework
Nx helps architect, test, build at any scale:</p>
</blockquote>
<ul>
<li>integrations with modern frameworks</li>
<li>computation caching</li>
<li>smart rebuilds of affected projects</li>
<li>distributed task execution</li>
<li>powerful code generators</li>
<li>editor support (VSCode, WebStorm)</li>
<li>GitHub apps</li>
<li>and more.</li>
</ul>
<h3 id="nx-çš„è£½ä½œåœ˜éšŠ"><a aria-hidden="true" class="anchor-heading" href="#nx-çš„è£½ä½œåœ˜éšŠ"><svg aria-hidden="true" viewBox="0 0 16 16"><use xlink:href="#svg-link"></use></svg></a>Nx çš„è£½ä½œåœ˜éšŠ</h3>
<p>narwhal ç°¡å¯« Nrwlï¼Œæ˜¯ç¨è§’é¯¨çš„è‹±æ–‡ã€‚</p>
<p><img src="/dendron-blog/assets/images/2021-12-27-23-57-12.png"></p>
<p>Consulting. Engineering. Training.
Nrwl was founded in December 2016 by Angular team members and former Googlers, Jeff Cross and Victor Savkin, and today has around 18 team members in the US, Canada and UK.
Nrwl is also the creator of open-source dev tools: Nx for monorepo development, and Angular Console.</p>
<h3 id="angular-monorepo-patterns"><a aria-hidden="true" class="anchor-heading" href="#angular-monorepo-patterns"><svg aria-hidden="true" viewBox="0 0 16 16"><use xlink:href="#svg-link"></use></svg></a>Angular monorepo patterns</h3>
<p>é€™æœ¬æ›¸èªªæ˜äº† nx æ˜¯å¦‚ä½•å¯¦è¸ monerepo æ¦‚å¿µ</p>
<p><img src="/dendron-blog/assets/images/2021-12-27-23-59-52.png"></p>
<ul>
<li><a href="https://connect.nrwl.io/app/books">https://connect.nrwl.io/app/books</a></li>
<li><a href="https://nrwl.io/products">https://nrwl.io/products</a></li>
</ul>
<h3 id="nx-èˆ‡-angular-æ·µæºä¸æ·º"><a aria-hidden="true" class="anchor-heading" href="#nx-èˆ‡-angular-æ·µæºä¸æ·º"><svg aria-hidden="true" viewBox="0 0 16 16"><use xlink:href="#svg-link"></use></svg></a>Nx èˆ‡ Angular æ·µæºä¸æ·º</h3>
<p><img src="/dendron-blog/assets/images/2021-12-28-00-06-48.png"></p>
<p>ä¸Šé¢é€™å…©ä½ Nx é–‹ç™¼çš„ä¸»å°è€…æ˜¯ Google çš„å‰å“¡å·¥ï¼Œä¸”å° Angular éƒ½æœ‰ç›¸ç•¶æ·±å…¥çš„ç†è§£ã€‚
ä½† Nx å®˜ç¶²ä¸Šæœ‰ä¸å°‘ react çš„é–‹ç™¼æ•™å­¸ï¼Œå¦‚æœæœ‰å…¬å¸æƒ³è¦å¾ react è½‰åˆ° angular(æˆ–æ˜¯ angular è½‰ react ç‚ºä¸»)ï¼Œæ„Ÿè¦ºé€é Nx çš„å¹«åŠ©å¯ä»¥æ…¢æ…¢åœ°ç§»èŠ±æ¥æœ¨(ä¸ç„¶ Nx ä¹Ÿè‡³å°‘å¯ä»¥è®“é€™å…©æ¡†æ¶å’Œå¹³å…±è™• ğŸ˜†)</p>
<h3 id="angular-è©å½™è¡¨"><a aria-hidden="true" class="anchor-heading" href="#angular-è©å½™è¡¨"><svg aria-hidden="true" viewBox="0 0 16 16"><use xlink:href="#svg-link"></use></svg></a>Angular è©å½™è¡¨</h3>
<ul>
<li>
<p><a href="https://angular.tw/guide/glossary#workspace">Workspace</a> (å·¥ä½œå€)</p>
<p>ä¸€å€‹ Angular æ‰€æœ‰å°ˆæ¡ˆçš„é›†åˆ(å¯ä»¥ç”¨ Angular CLI æ“ä½œé€™å€‹é›†åˆ)ï¼Œé€šå¸¸æœƒåœ¨ git ç‰ˆæœ¬æ§åˆ¶çš„ repository ä¸­ã€‚</p>
</li>
<li>
<p><a href="https://angular.tw/guide/glossary#project">Project</a> (å°ˆæ¡ˆ)</p>
<p>å¯ä»¥é€šé Angular CLI å‘½ä»¤å‰µå»ºæˆ–ä¿®æ”¹çš„ç¨ç«‹æ‡‰ç”¨ç¨‹å¼æˆ–å‡½å¼åº«ã€‚å¯åœ¨ angular.json ä¸­é…ç½® workspace ä¸­çš„æ‰€æœ‰ projectsã€‚</p>
</li>
<li>
<p><a href="https://angular.tw/guide/glossary#library">Library</a> (å‡½å¼åº«)</p>
<p>ä¸€ç¨® Angular å°ˆæ¡ˆã€‚ç”¨ä¾†è®“å…¶å®ƒ Angular æ‡‰ç”¨åŒ…å«å®ƒï¼Œä»¥æä¾›å„ç¨®åŠŸèƒ½ã€‚å‡½å¼åº«ä¸æ˜¯ä¸€å€‹å®Œæ•´çš„ Angular æ‡‰ç”¨ï¼Œä¸èƒ½ç¨ç«‹åŸ·è¡Œã€‚</p>
</li>
<li>
<p><a href="https://angular.tw/guide/typescript-configuration#configuration-files">TypeScript é…ç½®</a></p>
<p>ä¸€å€‹ Angular å·¥ä½œå€ä¸­åŒ…å«å¤šå€‹ TypeScript é…ç½®æª”æ¡ˆã€‚åœ¨ rootï¼Œæœ‰å…©å€‹ä¸»è¦çš„ TypeScript é…ç½®æª”æ¡ˆï¼štsconfig.json æª”æ¡ˆå’Œ tsconfig.app.json æª”æ¡ˆã€‚<a href="https://www.typescriptlang.org/docs/handbook/tsconfig-json.html#tsconfig-bases">ä½¿ç”¨ extends é€²è¡Œé…ç½®ç¹¼æ‰¿</a>ã€‚</p>
</li>
<li>
<p><a href="https://angular.tw/guide/glossary#schematic">Schematic</a> (åŸç†åœ–)</p>
<p>Angular CLI ä½¿ç”¨åŸç†åœ–ä¾†ç”¢ç”Ÿå’Œä¿®æ”¹ Angular å°ˆæ¡ˆåŠå…¶éƒ¨ä»¶ã€‚</p>
</li>
<li>
<p>Collection (é›†åˆ)</p>
<p>åœ¨ Angular ä¸­ï¼Œæ˜¯æŒ‡æ”¶éŒ„åœ¨åŒä¸€å€‹ <a href="https://angular.tw/guide/glossary#npm-package">npm å¥—ä»¶</a> ä¸­çš„ä¸€çµ„åŸç†åœ–ï¼ˆschematicsï¼‰ã€‚</p>
<p><img src="/dendron-blog/assets/images/2021-12-28-00-23-52.png"></p>
</li>
</ul>
<h2 id="æ„Ÿå—ä¸€ä¸‹-nx-çš„-monorepo-å°ˆæ¡ˆ"><a aria-hidden="true" class="anchor-heading" href="#æ„Ÿå—ä¸€ä¸‹-nx-çš„-monorepo-å°ˆæ¡ˆ"><svg aria-hidden="true" viewBox="0 0 16 16"><use xlink:href="#svg-link"></use></svg></a>æ„Ÿå—ä¸€ä¸‹ Nx çš„ monorepo å°ˆæ¡ˆ</h2>
<ul>
<li>
<p>Angular workspace çš„ libs é€šå¸¸éƒ½æœƒæœ‰ä¸€å€‹è‡ªå·±çš„ <code>package.json</code>
<img src="/dendron-blog/assets/images/2021-12-28-00-29-52.png"></p>
</li>
<li>
<p>Nx workspace é è¨­å…±ç”¨ä¸€å€‹ <code>package.json</code>
<img src="/dendron-blog/assets/images/2021-12-28-00-28-00.png"></p>
</li>
</ul>
<h2 id="ç”¢ç”Ÿä¸€å€‹-nx-çš„-workspace"><a aria-hidden="true" class="anchor-heading" href="#ç”¢ç”Ÿä¸€å€‹-nx-çš„-workspace"><svg aria-hidden="true" viewBox="0 0 16 16"><use xlink:href="#svg-link"></use></svg></a>ç”¢ç”Ÿä¸€å€‹ Nx çš„ workspace</h2>
<h2 id="å¿«é€Ÿä¸Šæ‰‹-nx-console-æ“ä½œ-generaterun"><a aria-hidden="true" class="anchor-heading" href="#å¿«é€Ÿä¸Šæ‰‹-nx-console-æ“ä½œ-generaterun"><svg aria-hidden="true" viewBox="0 0 16 16"><use xlink:href="#svg-link"></use></svg></a>å¿«é€Ÿä¸Šæ‰‹ Nx Console æ“ä½œ (Generateã€Run)</h2>
<h2 id="å…¶ä»–è£œå……"><a aria-hidden="true" class="anchor-heading" href="#å…¶ä»–è£œå……"><svg aria-hidden="true" viewBox="0 0 16 16"><use xlink:href="#svg-link"></use></svg></a>å…¶ä»–è£œå……</h2>
<hr>
<h2 id="tags"><a aria-hidden="true" class="anchor-heading" href="#tags"><svg aria-hidden="true" viewBox="0 0 16 16"><use xlink:href="#svg-link"></use></svg></a>Tags</h2>
<ol>
<li><a class="color-tag" style="--tag-color: #028f1e;" href="/dendron-blog/notes/Po0jmNACWQVrxnoTRT6kr">PROG.Nx</a></li>
</ol>