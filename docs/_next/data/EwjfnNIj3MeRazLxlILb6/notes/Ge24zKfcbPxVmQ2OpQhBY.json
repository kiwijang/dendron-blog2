{"pageProps":{"note":{"id":"Ge24zKfcbPxVmQ2OpQhBY","title":"0208 Live Server 開啟 build 檔案","vault":{"fsPath":"vault"},"type":"note","desc":"","links":[{"type":"frontmatterTag","from":{"fname":"drops.2022.0208-Live Server 開啟 build 檔案","id":"Ge24zKfcbPxVmQ2OpQhBY","vaultName":"vault"},"value":"tags.PROG.Angular","alias":"PROG.Angular","xvault":false,"to":{"fname":"tags.PROG.Angular"}},{"type":"frontmatterTag","from":{"fname":"drops.2022.0208-Live Server 開啟 build 檔案","id":"Ge24zKfcbPxVmQ2OpQhBY","vaultName":"vault"},"value":"tags.PROG.Server","alias":"PROG.Server","xvault":false,"to":{"fname":"tags.PROG.Server"}}],"anchors":{"1-直接資料夾開啟-indexhtml會遇到一些問題":{"type":"header","text":"1. 直接資料夾開啟 index.html，會遇到一些問題:","value":"1-直接資料夾開啟-indexhtml會遇到一些問題","line":11,"column":0,"depth":2},"2-下載-live-server":{"type":"header","text":"2. 下載 Live Server","value":"2-下載-live-server","line":29,"column":0,"depth":2},"3-使用-live-server-但路由出問題":{"type":"header","text":"3. 使用 Live Server 但路由出問題:","value":"3-使用-live-server-但路由出問題","line":37,"column":0,"depth":2},"4-關於-angular-hashlocationstrategy":{"type":"header","text":"4. 關於 Angular HashLocationStrategy","value":"4-關於-angular-hashlocationstrategy","line":49,"column":0,"depth":2},"5-小結設定-hashlocationstrategy--live-server":{"type":"header","text":"5. 小結:設定 HashLocationStrategy + live server","value":"5-小結設定-hashlocationstrategy--live-server","line":66,"column":0,"depth":2}},"fname":"drops.2022.0208-Live Server 開啟 build 檔案","updated":1644456757297,"created":1644317231901,"parent":"4MPQXb6WwUg0kGHxTPD7x","children":[],"data":{},"contentHash":"7b8b1de8f4fc2801654acec1cd60d812","custom":{},"tags":["PROG.Angular","PROG.Server"]},"body":"<h1 id=\"0208-live-server-開啟-build-檔案\"><a aria-hidden=\"true\" class=\"anchor-heading\" href=\"#0208-live-server-開啟-build-檔案\"><svg aria-hidden=\"true\" viewBox=\"0 0 16 16\"><use xlink:href=\"#svg-link\"></use></svg></a>0208 Live Server 開啟 build 檔案</h1>\n<h2 id=\"1-直接資料夾開啟-indexhtml會遇到一些問題\"><a aria-hidden=\"true\" class=\"anchor-heading\" href=\"#1-直接資料夾開啟-indexhtml會遇到一些問題\"><svg aria-hidden=\"true\" viewBox=\"0 0 16 16\"><use xlink:href=\"#svg-link\"></use></svg></a>1. 直接資料夾開啟 index.html，會遇到一些問題:</h2>\n<p>在 angular 的 index.html 預設是 <code>&#x3C;base href=\"/\"></code></p>\n<p>所以會以檔案資料夾目錄的位置打開(網址列會長這樣: <code>file:///C:/Users/xxx.../dist/apps/client/index.html</code>)</p>\n<p>如果想用 <code>&#x3C;base href=\"./\"></code> 解決問題，若有設定路由會發現網址除了 server 根網址以外還多了路由，然後發生 404 錯誤...</p>\n<p><img src=\"/assets/images/2022-02-08-17-00-24.png\"></p>\n<p>另外，在瀏覽器上 es6 module 一定會遵循 CORS (參考文章:<a href=\"https://www.ithome.com.tw/voice/132470\">ES6 模組匯入-林信良</a>)，所以如果直接用 <code>file:///C:/Users/xxx.../dist/apps/client/index.html</code> 開啟會出現這樣的錯誤:</p>\n<p><img src=\"/assets/images/2022-02-08-17-18-04.png\"></p>\n<p><img src=\"/assets/images/2022-02-08-17-55-33.png\"></p>\n<blockquote>\n<p>Origin: null 是 null 的。😭</p>\n</blockquote>\n<h2 id=\"2-下載-live-server\"><a aria-hidden=\"true\" class=\"anchor-heading\" href=\"#2-下載-live-server\"><svg aria-hidden=\"true\" viewBox=\"0 0 16 16\"><use xlink:href=\"#svg-link\"></use></svg></a>2. 下載 Live Server</h2>\n<p><img src=\"/assets/images/2022-02-08-13-49-40.png\"></p>\n<p>所以這時就可以用 vscode 的 <a href=\"https://marketplace.visualstudio.com/items?itemName=ritwickdey.LiveServer\">Live Server 擴充套件</a> 來解決 Origin 的問題。</p>\n<p>接著發現可以成功載入首頁，但是其他路由會 404...</p>\n<h2 id=\"3-使用-live-server-但路由出問題\"><a aria-hidden=\"true\" class=\"anchor-heading\" href=\"#3-使用-live-server-但路由出問題\"><svg aria-hidden=\"true\" viewBox=\"0 0 16 16\"><use xlink:href=\"#svg-link\"></use></svg></a>3. 使用 Live Server 但路由出問題:</h2>\n<p>原因是瀏覽器把路由當成 http request 了。😭</p>\n<p><img src=\"/assets/images/2022-02-08-18-04-09.png\"></p>\n<p>於是為了解決這個問題，可以設定 HashLocationStrategy。</p>\n<pre class=\"language-typescript\"><code class=\"language-typescript\">providers<span class=\"token operator\">:</span> <span class=\"token punctuation\">[</span><span class=\"token punctuation\">{</span>provide<span class=\"token operator\">:</span> <span class=\"token maybe-class-name\">LocationStrategy</span><span class=\"token punctuation\">,</span> useClass<span class=\"token operator\">:</span> <span class=\"token maybe-class-name\">HashLocationStrategy</span><span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n</code></pre>\n<h2 id=\"4-關於-angular-hashlocationstrategy\"><a aria-hidden=\"true\" class=\"anchor-heading\" href=\"#4-關於-angular-hashlocationstrategy\"><svg aria-hidden=\"true\" viewBox=\"0 0 16 16\"><use xlink:href=\"#svg-link\"></use></svg></a>4. 關於 Angular HashLocationStrategy</h2>\n<ul>\n<li>Angular 官網\n<a href=\"https://angular.tw/api/common/HashLocationStrategy\">HashLocationStrategy</a></li>\n</ul>\n<blockquote>\n<p>A LocationStrategy used to configure the Location service to represent its state in the <a href=\"https://en.wikipedia.org/wiki/URL#Syntax\">hash fragment</a> of the browser's URL.\n此 LocationStrategy 用來配置 Location 服務，以便在瀏覽器 URL 的 <a href=\"https://en.wikipedia.org/wiki/URL#Syntax\">hash 片段</a>中表示其狀態。</p>\n</blockquote>\n<ul>\n<li>URI fragment wiki 說明\n<a href=\"https://en.wikipedia.org/wiki/URI_fragment\">URI fragment</a></li>\n</ul>\n<blockquote>\n<p>Fragments depend on the document MIME type and are evaluated by the client (web browser). Clients are not supposed to send URI fragments to servers when they retrieve a document, and without help from a local application (see below) fragments do not participate in HTTP redirections.</p>\n</blockquote>\n<p>所以看起來 fragments 可以解決網址被送到 server 的問題！🎉</p>\n<p>感覺設定成 HashLocationStrategy 只有好處沒有壞處的感覺(除了不常看到有網址會長這樣以外)。</p>\n<h2 id=\"5-小結設定-hashlocationstrategy--live-server\"><a aria-hidden=\"true\" class=\"anchor-heading\" href=\"#5-小結設定-hashlocationstrategy--live-server\"><svg aria-hidden=\"true\" viewBox=\"0 0 16 16\"><use xlink:href=\"#svg-link\"></use></svg></a>5. 小結:設定 HashLocationStrategy + live server</h2>\n<p>以後要開啟 build 後的檔案，可以設定 HashLocationStrategy 然後再用 live server 開啟就 Ok 了。🎉</p>\n<hr>\n<h2 id=\"tags\"><a aria-hidden=\"true\" class=\"anchor-heading\" href=\"#tags\"><svg aria-hidden=\"true\" viewBox=\"0 0 16 16\"><use xlink:href=\"#svg-link\"></use></svg></a>Tags</h2>\n<ol>\n<li><a class=\"color-tag\" style=\"--tag-color: #017371;\" href=\"/notes/zavPiB0ApTq1sGZOGq9xJ\">PROG.Angular</a></li>\n<li><a class=\"color-tag\" style=\"--tag-color: #030764;\" href=\"/notes/yvz3NEjMcVQ7sYJm3trFQ\">PROG.Server</a></li>\n</ol>","noteIndex":{"id":"root","title":"Collections","vault":{"fsPath":"vault"},"type":"note","desc":"","links":[{"type":"ref","from":{"fname":"root","id":"root","vaultName":"vault"},"value":"drops.2021.1226-first-day","position":{"start":{"line":4,"column":1,"offset":42},"end":{"line":4,"column":64,"offset":105},"indent":[]},"xvault":false,"to":{"fname":"drops.2021.1226-first-day","anchorHeader":"使用-dendron-紀錄:#*"}}],"anchors":{},"fname":"root","updated":1641016830362,"created":1595961348801,"parent":null,"children":["Cybv0wy1d2NbWoMaJ9Xst","u4tSbmkJewrKonY3sL544","rEbR1FrKkZzyjo6ahAgm3"],"data":{},"contentHash":"ca4ed6fa39558cee2d28c9aabc5ce74d","custom":{"stub":false,"nav_order":0,"permalink":"/"},"body":"\n\r\nDendron 官網: https://wiki.dendron.so/\r\n\r\n![[首次使用 Dendron 紀錄|drops.2021.1226-first-day#使用-dendron-紀錄:#*]]\r\n"},"collectionChildren":null,"customHeadContent":null,"config":{"version":4,"useFMTitle":true,"useNoteTitleForLink":true,"mermaid":true,"useKatex":true,"dev":{"enablePreviewV2":true},"site":{"copyAssets":true,"siteHierarchies":["root"],"siteRootDir":"docs","siteUrl":"https://kiwijang.github.io","usePrettyRefs":true,"title":"/ᐠ ._. ᐟ\\✧","description":"Personal knowledge space","siteLastModified":true,"gh_edit_repository":"https://github.com/kiwijang/kiwijang.github.io.git","gh_edit_branch":"master","duplicateNoteBehavior":{"action":"useVault","payload":["vault"]},"gh_edit_link":"false","usePrettyLinks":true,"siteNotesDir":"notes","siteFaviconPath":"favicon.ico","gh_edit_link_text":"Edit this page on GitHub","gh_root":"docs/","gh_edit_view_mode":"edit","writeStubs":true,"siteIndex":"root"},"commands":{"lookup":{"note":{"selectionMode":"extract","confirmVaultOnCreate":false,"leaveTrace":false,"bubbleUpCreateNew":true,"fuzzThreshold":0.2,"vaultSelectionModeOnCreate":"smart"}},"randomNote":{},"insertNote":{"initialValue":"templates"},"insertNoteLink":{"aliasMode":"none","enableMultiSelect":false},"insertNoteIndex":{"enableMarker":false}},"workspace":{"vaults":[{"fsPath":"vault"}],"journal":{"dailyDomain":"daily","name":"journal","dateFormat":"y.MM.dd","addBehavior":"childOfDomain"},"scratch":{"name":"scratch","dateFormat":"y.MM.dd.HHmmss","addBehavior":"asOwnDomain"},"task":{"name":"","dateFormat":"","addBehavior":"childOfCurrent","statusSymbols":{"":" ","wip":"w","done":"x","assigned":"a","moved":"m","blocked":"b","delegated":"l","dropped":"d","pending":"y"},"prioritySymbols":{"H":"high","M":"medium","L":"low"},"todoIntegration":false,"createTaskSelectionType":"selection2link"},"graph":{"zoomSpeed":1},"enableAutoCreateOnDefinition":false,"enableXVaultWikiLink":false,"enableRemoteVaultInit":true,"enableUserTags":true,"enableHashTags":true,"workspaceVaultSyncMode":"noCommit","enableAutoFoldFrontmatter":false,"enableEditorDecorations":true,"maxPreviewsCached":10,"maxNoteLength":204800},"preview":{"enableFMTitle":true,"enableNoteTitleForLink":true,"enableMermaid":true,"enablePrettyRefs":true,"enableKatex":true,"automaticallyShowPreview":false}}},"__N_SSG":true}