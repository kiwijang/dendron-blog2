{"pageProps":{"note":{"id":"sy14xjjozy0n9ustvre7tbo","title":"0907 [C#] 從 List 到 IEnumerable 和 IQueryable","desc":"","updated":1662567583552,"created":1662559527764,"tags":["PROG.C#"],"custom":{},"fname":"drops.2022.0907-[C#]從List到IEnumerable和IQueryable","type":"note","vault":{"fsPath":"vault"},"contentHash":"bc8b1d5b7f18db6bfffccb286bd07c11","links":[{"type":"frontmatterTag","from":{"fname":"drops.2022.0907-[C#]從List到IEnumerable和IQueryable","id":"sy14xjjozy0n9ustvre7tbo","vaultName":"vault"},"value":"tags.PROG.C#","alias":"PROG.C#","xvault":false,"to":{"fname":"tags.PROG.C#"}}],"anchors":{"ienumerable-vs-list---如何使用-他們是如何運作的":{"type":"header","text":"IEnumerable vs List - 如何使用? 他們是如何運作的?","value":"ienumerable-vs-list---如何使用-他們是如何運作的","line":10,"column":0,"depth":2},"linq-不會產生-sql-去查詢query資料庫直到你列舉enumerate他":{"type":"header","text":"LINQ 不會產生 Sql 去查詢(query)資料庫，直到你列舉(enumerate)他","value":"linq-不會產生-sql-去查詢query資料庫直到你列舉enumerate他","line":33,"column":0,"depth":2},"小結":{"type":"header","text":"小結","value":"小結","line":41,"column":0,"depth":1},"ienumberable-的大缺點":{"type":"header","text":"IEnumberable 的大缺點","value":"ienumberable-的大缺點","line":48,"column":0,"depth":2},"ienumerable-vs-iqueryable":{"type":"header","text":"IEnumerable vs IQueryable","value":"ienumerable-vs-iqueryable","line":54,"column":0,"depth":2},"小結-1":{"type":"header","text":"小結","value":"小結-1","line":62,"column":0,"depth":2},"可以看這兩篇範例會更清楚":{"type":"header","text":"可以看這兩篇範例，會更清楚","value":"可以看這兩篇範例會更清楚","line":81,"column":0,"depth":3},"參考資料":{"type":"header","text":"參考資料","value":"參考資料","line":88,"column":0,"depth":2}},"children":[],"parent":"4MPQXb6WwUg0kGHxTPD7x","data":{}},"body":"<h1 id=\"0907-c-從-list-到-ienumerable-和-iqueryable\"><a aria-hidden=\"true\" class=\"anchor-heading\" href=\"#0907-c-從-list-到-ienumerable-和-iqueryable\"><svg aria-hidden=\"true\" viewBox=\"0 0 16 16\"><use xlink:href=\"#svg-link\"></use></svg></a>0907 [C#] 從 List 到 IEnumerable 和 IQueryable</h1>\n<h2 id=\"ienumerable-vs-list---如何使用-他們是如何運作的\"><a aria-hidden=\"true\" class=\"anchor-heading\" href=\"#ienumerable-vs-list---如何使用-他們是如何運作的\"><svg aria-hidden=\"true\" viewBox=\"0 0 16 16\"><use xlink:href=\"#svg-link\"></use></svg></a>IEnumerable vs List - 如何使用? 他們是如何運作的?</h2>\n<p>以下取自: <a href=\"https://stackoverflow.com/questions/3628425/ienumerable-vs-list-what-to-use-how-do-they-work/3628465\">https://stackoverflow.com/questions/3628425/ienumerable-vs-list-what-to-use-how-do-they-work/3628465</a></p>\n<ul>\n<li>\n<p>一個類別實作 <code>IEnumerable</code> 的話，可以讓你使用 <code>foreach</code> 語法。</p>\n<blockquote>\n<p>A class that implement <code>IEnumerable</code> allows you to use the <code>foreach</code> syntax.</p>\n</blockquote>\n</li>\n<li>\n<p>一個 <code>IEnumerable</code> linq 陳述式，當你在使用 <code>foreach</code> 的時候會執行迭代，但你可以使用 <code>.ToList()</code> 強迫他馬上迭代。</p>\n<blockquote>\n<p>An <code>IEnumerable</code> linq statement executes when you iterate the <code>foreach</code>, but you can force it to iterate sooner using <code>.ToList()</code>.</p>\n</blockquote>\n</li>\n<li>\n<p><code>IEnumerable</code> 是唯獨的，而 <code>List</code> 並不是.</p>\n<blockquote>\n<p><code>IEnumerable</code> is read-only and <code>List</code> is not.</p>\n</blockquote>\n</li>\n<li>\n<p>當你使用 <code>IEnumerable</code> 你給編譯器一個機會推遲執行，在這期間可能有所優化。</p>\n<blockquote>\n<p>When you use <code>IEnumerable</code>, you give the compiler a chance to defer work until later, possibly optimizing along the way.</p>\n</blockquote>\n</li>\n<li>\n<p>如果你使用 <code>ToList()</code> 你強迫編譯器馬上實體化出結果。</p>\n<blockquote>\n<p>If you use <code>ToList()</code> you force the compiler to reify(實體化) the results right away.</p>\n</blockquote>\n</li>\n</ul>\n<h2 id=\"linq-不會產生-sql-去查詢query資料庫直到你列舉enumerate他\"><a aria-hidden=\"true\" class=\"anchor-heading\" href=\"#linq-不會產生-sql-去查詢query資料庫直到你列舉enumerate他\"><svg aria-hidden=\"true\" viewBox=\"0 0 16 16\"><use xlink:href=\"#svg-link\"></use></svg></a>LINQ 不會產生 Sql 去查詢(query)資料庫，直到你列舉(enumerate)他</h2>\n<pre><code>> LINQ doesn't generate the SQL to query the database until you enumerate it\n</code></pre>\n<ul>\n<li>\n<p><code>IEnumerable</code> 可以放置(stacking) LINQ expressions。</p>\n</li>\n<li>\n<p>e.g 當你用 <code>foreach</code> 列舉，或者使用 <code>ToList()</code> 才會執行查詢資料庫的動作。</p>\n</li>\n</ul>\n<h1 id=\"小結\"><a aria-hidden=\"true\" class=\"anchor-heading\" href=\"#小結\"><svg aria-hidden=\"true\" viewBox=\"0 0 16 16\"><use xlink:href=\"#svg-link\"></use></svg></a>小結</h1>\n<p>因為 linq 在你列舉他之前，不會去馬上去資料庫抓資料。\n列舉就是指 foreach 和 toList()\n他說 IEnumerable 可以拿來放 LINQ expressions。\n最後要拿資料再 toList() 就好</p>\n<h2 id=\"ienumberable-的大缺點\"><a aria-hidden=\"true\" class=\"anchor-heading\" href=\"#ienumberable-的大缺點\"><svg aria-hidden=\"true\" viewBox=\"0 0 16 16\"><use xlink:href=\"#svg-link\"></use></svg></a>IEnumberable 的大缺點</h2>\n<ul>\n<li>\n<p><a href=\"https://www.cnblogs.com/powertoolsteam/p/4936818.html\">最全数据结构详述: List VS IEnumerable VS IQueryable VS ICollection VS IDictionary</a></p>\n<blockquote>\n<p>使用 IEnumberable 會從服務器端將所有數據拷貝到客戶端，並進行一定的過濾，如果服務器端有大量數據會造成內存負載超重。</p>\n</blockquote>\n</li>\n</ul>\n<h2 id=\"ienumerable-vs-iqueryable\"><a aria-hidden=\"true\" class=\"anchor-heading\" href=\"#ienumerable-vs-iqueryable\"><svg aria-hidden=\"true\" viewBox=\"0 0 16 16\"><use xlink:href=\"#svg-link\"></use></svg></a><code>IEnumerable</code> vs <code>IQueryable</code></h2>\n<ul>\n<li>\n<p><a href=\"https://stackoverflow.com/questions/2876616/returning-ienumerablet-vs-iqueryablet\">Returning <code>IEnumerable&#x3C;T></code> vs. <code>IQueryable&#x3C;T></code></a></p>\n<blockquote>\n<p>The difference is that <code>IQueryable&#x3C;T></code> is the interface that allows LINQ-to-SQL (LINQ.-to-anything really) to work. So if you further refine your query on an <code>IQueryable&#x3C;T></code>, that query will be executed in the database, if possible.</p>\n</blockquote>\n<blockquote>\n<p>For the <code>IEnumerable&#x3C;T></code> case, it will be LINQ-to-object, meaning that all objects matching the original query will have to be loaded into memory from the database.</p>\n</blockquote>\n</li>\n</ul>\n<h2 id=\"小結-1\"><a aria-hidden=\"true\" class=\"anchor-heading\" href=\"#小結-1\"><svg aria-hidden=\"true\" viewBox=\"0 0 16 16\"><use xlink:href=\"#svg-link\"></use></svg></a>小結</h2>\n<ul>\n<li>\n<p>先備觀念:\nlinq 在列舉後才會到資料庫撈資料。</p>\n</li>\n<li>\n<p>問題: <code>IEnumerable&#x3C;T></code> 和 <code>IQuertable&#x3C;T></code> 差別</p>\n<ul>\n<li><code>IEnumerable&#x3C;T></code></li>\n</ul>\n<ol>\n<li>LINQ-to-object 可以放置(stacking) LINQ expressions</li>\n<li>但無法修改(新增刪除)。</li>\n<li>列舉時，無論有無下查詢條件，都會從 server 將所有數據拷貝到 client (<code>select * from [dbo.xxx]</code>)。</li>\n</ol>\n<ul>\n<li><code>IQuertable&#x3C;T></code></li>\n</ul>\n<ol>\n<li>allows LINQ-to-SQL (LINQ-to-anything really)</li>\n<li>可以放置(stacking) LINQ expressions。</li>\n<li>在列舉前都可對查詢條件做修改。</li>\n</ol>\n</li>\n</ul>\n<h3 id=\"可以看這兩篇範例會更清楚\"><a aria-hidden=\"true\" class=\"anchor-heading\" href=\"#可以看這兩篇範例會更清楚\"><svg aria-hidden=\"true\" viewBox=\"0 0 16 16\"><use xlink:href=\"#svg-link\"></use></svg></a>可以看這兩篇範例，會更清楚</h3>\n<ul>\n<li>\n<p><a href=\"https://blog.darkthread.net/blog/iqueryable-experiment/\">關於<code>IQueryable&#x3C;T></code>特性的小實驗</a></p>\n</li>\n<li>\n<p><a href=\"https://www.cnblogs.com/powertoolsteam/p/4936818.html\">最全数据结构详述: List VS IEnumerable VS IQueryable VS ICollection VS IDictionary</a></p>\n<blockquote>\n<p><img src=\"/assets/images/2022-09-07-22-36-54.png\"></p>\n</blockquote>\n</li>\n</ul>\n<h2 id=\"參考資料\"><a aria-hidden=\"true\" class=\"anchor-heading\" href=\"#參考資料\"><svg aria-hidden=\"true\" viewBox=\"0 0 16 16\"><use xlink:href=\"#svg-link\"></use></svg></a>參考資料</h2>\n<ul>\n<li>\n<p><a href=\"https://blog.darkthread.net/blog/iqueryable-experiment/\">關於 <code>IQueryable&#x3C;T></code> 特性的小實驗</a></p>\n</li>\n<li>\n<p><a href=\"https://www.cnblogs.com/powertoolsteam/p/4936818.html\">最全数据结构详述: List VS IEnumerable VS IQueryable VS ICollection VS IDictionary</a></p>\n</li>\n<li>\n<p><a href=\"https://dotblogs.com.tw/UgiYo/2019/08/10/001704\">IEnumerable v.s IQueryable</a></p>\n</li>\n<li>\n<p><a href=\"https://dotblogs.com.tw/joysdw12/2013/06/07/web-api-odata\">[Web API] 讓 Web API 支援 OData 查詢</a></p>\n</li>\n</ul>\n<hr>\n<h2 id=\"tags\"><a aria-hidden=\"true\" class=\"anchor-heading\" href=\"#tags\"><svg aria-hidden=\"true\" viewBox=\"0 0 16 16\"><use xlink:href=\"#svg-link\"></use></svg></a>Tags</h2>\n<ol>\n<li><a class=\"color-tag\" style=\"--tag-color: #c292a1;\" href=\"/notes/8butragqifg44gfphdug6ys\">PROG.C#</a></li>\n</ol>","noteIndex":{"id":"root","title":"( Φ w Φ )","desc":"","updated":1650381339323,"created":1595961348801,"custom":{"stub":false,"nav_order":0,"permalink":"/"},"fname":"root","type":"note","vault":{"fsPath":"vault"},"contentHash":"acc933de5170843ff0ca0380d9ab6de4","links":[],"anchors":{},"children":["Cybv0wy1d2NbWoMaJ9Xst","u4tSbmkJewrKonY3sL544","WAKWMq3SeVmlAmZRqCbpB","rEbR1FrKkZzyjo6ahAgm3"],"parent":null,"data":{},"body":"\n\r\nDendron 官網: https://wiki.dendron.so/\r\n\r\n<!-- ![[首次使用 Dendron 紀錄|drops.2021.1226-first-day#使用-dendron-紀錄:#*]] -->\r\n<!-- <div class=\"portal-container\">\r\n<div class=\"portal-head\">\r\n<div class=\"portal-backlink\">\r\n<div class=\"portal-title\">From <span class=\"portal-text-title\">1226 使用 Dendron 紀錄</span></div>\r\n<a href=\"/notes/DTeYpEuPv3KIHugUyqZPu\" class=\"portal-arrow\">Go to text <span class=\"right-arrow\">→</span></a>\r\n</div>\r\n</div>\r\n<div id=\"portal-parent-anchor\" class=\"portal-parent\" markdown=\"1\">\r\n<div class=\"portal-parent-fader-top\"></div>\r\n<div class=\"portal-parent-fader-bottom\"></div><h2 id=\"使用-dendron-紀錄\"><a aria-hidden=\"true\" class=\"anchor-heading\" href=\"#使用-dendron-紀錄\"><svg aria-hidden=\"true\" viewBox=\"0 0 16 16\"><use xlink:href=\"#svg-link\"></use></svg></a>使用 Dendron 紀錄</h2>\r\n</div></div> -->\r\n"},"collectionChildren":null,"customHeadContent":null,"config":{"version":5,"dev":{"enablePreviewV2":true},"commands":{"lookup":{"note":{"selectionMode":"extract","confirmVaultOnCreate":false,"leaveTrace":false,"bubbleUpCreateNew":true,"fuzzThreshold":0.2,"vaultSelectionModeOnCreate":"smart"}},"randomNote":{},"insertNote":{"initialValue":"templates"},"insertNoteLink":{"aliasMode":"none","enableMultiSelect":false},"insertNoteIndex":{"enableMarker":false},"copyNoteLink":{}},"workspace":{"vaults":[{"fsPath":"vault"}],"journal":{"dailyDomain":"daily","name":"journal","dateFormat":"y.MM.dd","addBehavior":"childOfDomain"},"scratch":{"name":"scratch","dateFormat":"y.MM.dd.HHmmss","addBehavior":"asOwnDomain"},"task":{"name":"","dateFormat":"","addBehavior":"childOfCurrent","statusSymbols":{"":" ","wip":"w","done":"x","assigned":"a","moved":"m","blocked":"b","delegated":"l","dropped":"d","pending":"y"},"prioritySymbols":{"H":"high","M":"medium","L":"low"},"todoIntegration":false,"createTaskSelectionType":"selection2link"},"graph":{"zoomSpeed":1},"enableAutoCreateOnDefinition":false,"enableXVaultWikiLink":false,"enableRemoteVaultInit":true,"enableUserTags":true,"enableHashTags":true,"workspaceVaultSyncMode":"noCommit","enableAutoFoldFrontmatter":false,"enableEditorDecorations":true,"maxPreviewsCached":10,"maxNoteLength":204800,"enableFullHierarchyNoteTitle":false,"dendronVersion":"0.92.1"},"preview":{"enableFMTitle":true,"enableNoteTitleForLink":true,"enableMermaid":true,"enablePrettyRefs":true,"enableKatex":true,"automaticallyShowPreview":false,"enableFrontmatterTags":true,"enableHashesForFMTags":false},"publishing":{"enableFMTitle":true,"enableNoteTitleForLink":true,"enableMermaid":true,"enablePrettyRefs":true,"enableKatex":true,"copyAssets":true,"siteHierarchies":["root"],"enableSiteLastModified":true,"siteRootDir":"docs","siteUrl":"https://kiwijang.github.io","enableFrontmatterTags":true,"enableHashesForFMTags":false,"enableRandomlyColoredTags":true,"duplicateNoteBehavior":{"action":"useVault","payload":["vault"]},"writeStubs":false,"seo":{"title":"/ᐠ ._. ᐟ\\✧","description":"網頁開發技術筆記"},"github":{"enableEditLink":false,"editLinkText":"Edit this page on GitHub","editBranch":"master","editViewMode":"tree","editRepository":"https://github.com/kiwijang/kiwijang.github.io.git"},"enablePrettyLinks":true},"site":{"siteHierarchies":["root"],"siteRootDir":"docs","siteUrl":"https://kiwijang.github.io","title":"/ᐠ ._. ᐟ\\✧","copyAssets":true,"usePrettyRefs":true,"description":"Personal knowledge space","siteLastModified":true,"gh_edit_branch":"main","usePrettyLinks":true,"siteNotesDir":"notes","siteFaviconPath":"favicon.ico","gh_edit_link":true,"gh_edit_link_text":"Edit this page on GitHub","gh_root":"docs/","gh_edit_view_mode":"edit","writeStubs":true,"siteIndex":"root"},"useFMTitle":true,"useNoteTitleForLink":true,"mermaid":true,"useKatex":true}},"__N_SSG":true}