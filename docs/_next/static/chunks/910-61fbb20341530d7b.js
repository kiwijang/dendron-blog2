"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[910],{9910:function(t,e,n){n.d(e,{Z:function(){return q}});var r=n(28520),i=n.n(r),o=n(85893),s=n(4604),a=n(71230),c=n(15746),l=n(96486),d=n.n(l),u=n(67294),f=n(42336),h=n(41664),x=n(99490);function p(t){var e,n,r,i=t.note,s=t.noteIndex,a=(0,f.gt)({note:i,noteIndex:s});try{e=d().get(i,"custom.date",!1)?(n=i.custom.date,r=x.DateTime.DATE_SHORT,x.DateTime.fromISO(n).toLocaleString(r)):function(t,e){return x.DateTime.fromMillis(t).toLocaleString(e)}(i.created,x.DateTime.DATE_SHORT)}catch(c){throw Error("no date found for note ".concat(i.id))}return(0,o.jsx)("div",{children:(0,o.jsxs)("article",{itemScope:!0,itemType:"https://schema.org/CreativeWork",children:[(0,o.jsx)("h2",{itemProp:"headline",children:(0,o.jsx)(h.default,{href:a,children:i.title})}),!d().isUndefined(e)&&(0,o.jsx)("p",{children:e}),d().has(i,"custom.excerpt")&&(0,o.jsx)("p",{itemProp:"description",children:i.custom.excerpt})]})})}var v=n(9008),g=n(25935);function m(t){var e=t.content,n=(0,g.ZP)(e);return(0,o.jsx)(v.default,{children:n})}var j=n(25903),y=n(2962),b=n(1512),w=function(t){return j.Time.DateTime.fromMillis(d().toInteger(t)).setZone("utc").toLocaleString("yyyy-LL-dd")};function O(t){var e=t.note,n=t.config,r=(0,b.vm)().router.asPath;if(d().some(["403"],(function(t){return r==="/notes/".concat(t,"/")})))return null;var i,s=j.PublishUtils.getSEOPropsFromConfig(n),a=j.PublishUtils.getSEOPropsFromNote(e),c=d().defaults(a,s),l=c.title,u=c.excerpt,h=(null===c||void 0===c?void 0:c.image)?[c.image]:[],x=function(t){var e=t.sitePath,n=t.seoProps,r=t.siteConfig;return n.canonicalBaseUrl?[r.siteUrl,e].join(""):n.canonicalUrl?n.canonicalUrl:[r.canonicalBaseUrl?r.canonicalBaseUrl:(0,f.N0)(r),e].join("")}({sitePath:r,seoProps:c,siteConfig:n.site}),p=c.twitter?{handle:c.twitter,site:c.twitter,cardType:"summary_large_image"}:void 0;return(0,o.jsx)(y.PB,{title:l,description:u,canonical:x,noindex:c.noindex,twitter:p,openGraph:{title:l,description:u,url:x,images:h,type:"article",article:{publishedTime:w(c.created),modifiedTime:w(c.updated),tags:(i=e,i.tags?Array.isArray(i.tags)?i.tags:[i.tags]:[])}}})}var P=n(57450),S=n(37802);function T(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function k(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{},r=Object.keys(n);"function"===typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(t){return Object.getOwnPropertyDescriptor(n,t).enumerable})))),r.forEach((function(e){T(t,e,n[e])}))}return t}function E(t,e){if(null==t)return{};var n,r,i=function(t,e){if(null==t)return{};var n,r,i={},o=Object.keys(t);for(r=0;r<o.length;r++)n=o[r],e.indexOf(n)>=0||(i[n]=t[n]);return i}(t,e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);for(r=0;r<o.length;r++)n=o[r],e.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(t,n)&&(i[n]=t[n])}return i}function L(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var n=[],r=!0,i=!1,o=void 0;try{for(var s,a=t[Symbol.iterator]();!(r=(s=a.next()).done)&&(n.push(s.value),!e||n.length!==e);r=!0);}catch(c){i=!0,o=c}finally{try{r||null==a.return||a.return()}finally{if(i)throw o}}return n}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}var N=S.Z.Link,D=function(t){t=(t=t.replace(/_/g,"-")).replace(/--/g,"-");var e=[];return t.split("-").forEach((function(t){e.push(t.substr(0,1).toUpperCase()+t.substr(1))})),e.join(" ")},Z=function(t){var e,n,r=t.note,i=E(t,["note"]),s=(0,u.useState)(void 0),a=s[0],c=s[1];return(0,u.useEffect)((function(){c(window.innerHeight/2)}),[]),(0,o.jsx)(o.Fragment,{children:(0,o.jsxs)(S.Z,k({style:{zIndex:1},className:"dendron-toc"},i,{targetOffset:a,children:[Object.entries(null===r||void 0===r?void 0:r.anchors).map((function(t){var e,n,r=L(t,2),i=r[0],s=r[1];return"header"!==(null===s||void 0===s?void 0:s.type)?(0,o.jsx)(o.Fragment,{}):(null===s||void 0===s?void 0:s.depth)>2?(0,o.jsx)("div",{style:{paddingLeft:"20px"},children:(0,o.jsx)(N,{href:"#".concat(i),title:D(null!==(e=null===s||void 0===s?void 0:s.text)&&void 0!==e?e:null===s||void 0===s?void 0:s.value)})}):(0,o.jsx)("div",{children:(0,o.jsx)(N,{href:"#".concat(i),title:D(null!==(n=null===s||void 0===s?void 0:s.text)&&void 0!==n?n:null===s||void 0===s?void 0:s.value)})})})),(null===r||void 0===r||null===(e=r.links)||void 0===e?void 0:e.length)>0&&(null===r||void 0===r?void 0:r.links.some((function(t){return"backlink"===t.type})))?(0,o.jsx)(N,{href:"#backlinks",title:"Backlinks"}):(0,o.jsx)(o.Fragment,{}),(null===r||void 0===r||null===(n=r.children)||void 0===n?void 0:n.length)>0?(0,o.jsx)(N,{href:"#children",title:"Children"}):(0,o.jsx)(o.Fragment,{})]}))})},I=n(54856),U=n(85416),A=n(45875),C=n(27049),F=n(53944),B=n(54811),_=A.b.LAYOUT,H=function(t){var e,n=(0,B.T)((function(t){return t.engine}));if(!(0,s.verifyEngineSliceState)(n))return null;var r=(0,f.N0)(n.config.site),i=t.note;if("w"===i.custom.status)return(0,o.jsxs)("span",{style:{fontSize:"14px",color:"lightgrey"},children:[(0,o.jsx)("span",{style:{display:"inline-block",width:"8px",height:"8px",backgroundColor:"pink",marginLeft:"10px",marginRight:"4px",borderRadius:"10px"}}),"pending notes (\u9019\u7bc7\u6587\u7ae0\u9084\u6c92\u5beb\u5b8c)"]});if(!i.id||"root"===i.id||"root"===i.parent||!0===(null===(e=i.custom)||void 0===e?void 0:e.stub)||"about"===i.id||"tags"===i.fname.split(".")[0]||"0drops"===i.fname.split(".")[0])return(0,o.jsx)(o.Fragment,{});var a={url:"".concat(r,"/notes/").concat(i.id),identifier:i.id,title:i.title};return(0,o.jsxs)(c.Z,{xs:24,md:18,children:[(0,o.jsx)(C.Z,{dashed:!0}),(0,o.jsx)("div",{style:{paddingRight:"".concat(_.PADDING,"px")},children:(0,o.jsx)(F.qw,{shortname:"kiwijang",config:a})}),(0,o.jsx)(C.Z,{dashed:!0})]})};function R(t,e,n,r,i,o,s){try{var a=t[o](s),c=a.value}catch(l){return void n(l)}a.done?e(c):Promise.resolve(c).then(r,i)}function G(t){return function(){var e=this,n=arguments;return new Promise((function(r,i){var o=t.apply(e,n);function s(t){R(o,r,i,s,a,"next",t)}function a(t){R(o,r,i,s,a,"throw",t)}s(void 0)}))}}function M(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var n=[],r=!0,i=!1,o=void 0;try{for(var s,a=t[Symbol.iterator]();!(r=(s=a.next()).done)&&(n.push(s.value),!e||n.length!==e);r=!0);}catch(c){i=!0,o=c}finally{try{r||null==a.return||a.return()}finally{if(i)throw o}}return n}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}var z=A.b.LAYOUT,Y=A.b.HEADER;function q(t){var e,n=t.note,r=t.body,l=t.collectionChildren,f=t.noteIndex,h=t.customHeadContent,x=t.config,v=t.rootBody,g=(0,s.createLogger)("Note"),j=(0,b.vm)().getActiveNoteId,y=M(u.useState(void 0),2),w=y[0],S=y[1],T=j(),k="";"root"===T&&(k=T,T=f.id);var E=(0,I.$s)();(0,I.O5)((function(t){return t.engine}));g.info({ctx:"enter",id:T});(0,b.dD)().isMobile;u.useEffect((function(){if(g.info({ctx:"updateNoteBody:enter",id:T}),d().isUndefined(T))g.info({ctx:"updateNoteBody:exit",id:T,state:"id undefined"});else{if(T===n.id)return E(U.w.Nw.setLoadingStatus(s.LoadingStatus.FULFILLED)),void g.info({ctx:"updateNoteBody:exit",id:T,state:"id = note.id"});g.info({ctx:"updateNoteBody:fetch:pre",id:T}),fetch("/data/notes/".concat(T,".html")).then(G(i().mark((function t(e){var n;return i().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return g.info({ctx:"updateNoteBody:fetch:post",id:T}),t.next=3,e.text();case 3:n=t.sent,S(n),E(U.w.Nw.setLoadingStatus(s.LoadingStatus.FULFILLED));case 6:case"end":return t.stop()}}),t)}))))}}),[T]);var L=T===n.id?r:w;if(d().isUndefined(L))return(0,o.jsx)(P.Z,{});var N=(null===(e=n.custom)||void 0===e?void 0:e.has_collection)&&!d().isNull(l)?l.map((function(t){return p({note:t,noteIndex:f})})):null;return T===k?(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(O,{note:n,config:x}),h&&(0,o.jsx)(m,{content:h}),(0,o.jsx)(a.Z,{children:(0,o.jsx)(c.Z,{span:24,children:(0,o.jsxs)(a.Z,{children:[(0,o.jsxs)(c.Z,{xs:24,md:18,children:[(0,o.jsx)("div",{style:{paddingRight:"".concat(z.PADDING,"px")},children:(0,o.jsx)(s.DendronNote,{noteContent:v||"",config:x})}),N]}),(0,o.jsx)(c.Z,{xs:0,md:6,children:(0,o.jsx)(Z,{note:n,offsetTop:Y.HEIGHT})}),(0,o.jsx)(H,{note:n})]})})})]}):(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(O,{note:n,config:x}),h&&(0,o.jsx)(m,{content:h}),(0,o.jsx)(a.Z,{children:(0,o.jsx)(c.Z,{span:24,children:(0,o.jsxs)(a.Z,{children:[(0,o.jsxs)(c.Z,{xs:24,md:18,children:[(0,o.jsx)("div",{style:{paddingRight:"".concat(z.PADDING,"px")},children:(0,o.jsx)(s.DendronNote,{noteContent:L,config:x})}),N]}),(0,o.jsx)(c.Z,{xs:0,md:6,children:(0,o.jsx)(Z,{note:n,offsetTop:Y.HEIGHT})}),(0,o.jsx)(H,{note:n})]})})})]})}}}]);